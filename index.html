<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainly SAP - Kurumsal YÃ¶netim</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #020617; color: white; margin: 0; }
        .font-brand { font-family: 'Orbitron', sans-serif; }
        .bg-solar { 
            background: linear-gradient(rgba(2, 6, 23, 0.8), rgba(2, 6, 23, 0.95)), 
            url('https://images.unsplash.com/photo-1509391366360-2e959784a276?auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center; background-attachment: fixed;
        }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); }
        .btn-green { background: #22c55e; transition: all 0.3s; }
        .btn-green:hover { background: #16a34a; transform: translateY(-2px); shadow: 0 10px 15px -3px rgba(34, 197, 94, 0.4); }
    </style>
</head>
<body class="bg-solar min-h-screen">
    <div id="app">
        
        <div v-if="!isLoggedIn" class="h-screen flex items-center justify-center p-4">
            <div class="glass p-10 rounded-[2.5rem] w-full max-w-md shadow-2xl border-t-4 border-green-500">
                <h1 class="font-brand text-3xl text-green-500 text-center mb-8 tracking-widest">SUSTAINLY</h1>
                <div class="space-y-4">
                    <input v-model="login.user" placeholder="KullanÄ±cÄ± AdÄ±" class="w-full bg-black/40 border border-white/10 p-4 rounded-xl outline-none focus:border-green-500 font-bold">
                    <input v-model="login.pass" type="password" placeholder="Åžifre" @keyup.enter="doLogin" class="w-full bg-black/40 border border-white/10 p-4 rounded-xl outline-none focus:border-green-500 font-bold">
                    <button @click="doLogin" class="w-full btn-green py-4 rounded-xl font-black text-white uppercase tracking-widest">Sisteme Gir</button>
                </div>
            </div>
        </div>

        <div v-else class="p-4 md:p-8">
            <div class="glass rounded-3xl p-6 mb-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-6">
                    <h2 class="font-brand text-xl text-green-500 tracking-tighter">SUSTAINLY SAP</h2>
                    <div class="flex gap-4 text-xs font-bold border-l border-white/20 pl-6">
                        <span class="text-slate-400">USD: <b class="text-white">{{ kurlar.USD }}â‚º</b></span>
                        <span class="text-slate-400">EUR: <b class="text-white">{{ kurlar.EUR }}â‚º</b></span>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <span class="text-[10px] font-black uppercase text-green-400">Personel: {{ currentUser }}</span>
                    <button @click="logout" class="text-[10px] text-red-500 font-bold border border-red-500/20 px-3 py-1 rounded-lg">Ã‡IKIÅž</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
                <div class="lg:col-span-3 space-y-6">
                    <div class="flex justify-between items-center bg-white/5 p-4 rounded-2xl">
                        <h3 class="font-bold uppercase text-sm tracking-widest text-slate-400">Aktif Proje Takibi</h3>
                        <button @click="yeniMusteri" class="btn-green px-6 py-2 rounded-xl text-xs font-black">+ YENÄ° MÃœÅžTERÄ°</button>
                    </div>

                    <div v-for="(m, i) in musteriler" :key="i" class="glass rounded-[2rem] p-6 border-l-4 border-green-500">
                        <div class="flex justify-between mb-4">
                            <div>
                                <h4 class="text-xl font-black">{{ m.ad }}</h4>
                                <p class="text-[10px] font-bold text-green-500 uppercase">{{ m.sehir }}</p>
                            </div>
                            <button @click="sil(i)" class="opacity-20 hover:opacity-100 text-red-500 text-xs">SÄ°L</button>
                        </div>

                        <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mb-6">
                            <button v-for="s in asamalar" :key="s" @click="toggle(m, s)"
                                :class="m.durum[s] ? 'bg-green-600 text-white' : 'bg-slate-900 text-slate-500 border border-white/5'"
                                class="text-[10px] font-bold p-3 rounded-xl transition-all">
                                {{ s }}
                            </button>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="flex-1 bg-black/40 h-2 rounded-full overflow-hidden">
                                <div class="bg-green-500 h-full transition-all" :style="{width: yuzde(m)+'%'}"></div>
                            </div>
                            <span class="text-xs font-black text-green-500">%{{ yuzde(m) }}</span>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-1 space-y-6">
                    <div class="glass p-6 rounded-[2rem] sticky top-28">
                        <h3 class="font-bold text-xs uppercase tracking-widest mb-4 text-green-500">Genel Saha NotlarÄ±</h3>
                        <textarea v-model="genelNot" class="w-full bg-black/40 border border-white/10 rounded-xl p-4 text-xs h-64 outline-none focus:border-green-500" placeholder="BugÃ¼n yapÄ±lacaklar, eksik malzemeler..."></textarea>
                        
                        <div class="mt-8 space-y-3">
                            <button @click="verileriSistemeIsle" class="w-full bg-green-600 hover:bg-green-400 py-6 rounded-2xl font-black text-white shadow-2xl shadow-green-900/40 transition-all uppercase tracking-tighter">
                                ðŸ’¾ VERÄ°LERÄ° SÄ°STEME Ä°ÅžLE
                            </button>
                            <p class="text-[9px] text-center text-slate-500 font-bold italic">Son KayÄ±t: {{ sonKayit }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    isLoggedIn: false,
                    currentUser: '',
                    sonKayit: '-',
                    login: { user: '', pass: '' },
                    kurlar: { USD: '...', EUR: '...' },
                    asamalar: ["BaÅŸvuru", "Ã‡aÄŸrÄ± Mektubu", "Proje Onay", "BaÄŸlantÄ± Anl.", "Montaj", "Kabul"],
                    musteriler: [],
                    genelNot: ''
                }
            },
            mounted() {
                this.kurCek();
                const session = localStorage.getItem('sustainly_session');
                if(session) { this.isLoggedIn = true; this.currentUser = session; }
                
                const data = localStorage.getItem('sustainly_storage');
                if(data) {
                    const parsed = JSON.parse(data);
                    this.musteriler = parsed.musteriler || [];
                    this.genelNot = parsed.genelNot || '';
                    this.sonKayit = parsed.tarih || '-';
                }
            },
            methods: {
                async kurCek() {
                    try {
                        // TCMB verisi iÃ§in gÃ¼venilir bir ara servis
                        const res = await fetch('https://api.exchangerate-api.com/v4/latest/TRY');
                        const data = await res.json();
                        this.kurlar.USD = (1 / data.rates.USD).toFixed(2);
                        this.kurlar.EUR = (1 / data.rates.EUR).toFixed(2);
                    } catch(e) { console.log("Kur alÄ±namadÄ±."); }
                },
                doLogin() {
                    // Basit Personel GiriÅŸi
                    if(this.login.user && this.login.pass === '1234') {
                        this.isLoggedIn = true;
                        this.currentUser = this.login.user;
                        localStorage.setItem('sustainly_session', this.currentUser);
                    } else { alert("HatalÄ± GiriÅŸ!"); }
                },
                logout() {
                    this.isLoggedIn = false;
                    localStorage.removeItem('sustainly_session');
                },
                yeniMusteri() {
                    const ad = prompt("MÃ¼ÅŸteri AdÄ±:");
                    const sehir = prompt("Åžehir:");
                    if(ad) {
                        this.musteriler.unshift({ ad, sehir, durum: {}, notlar: '' });
                    }
                },
                toggle(m, s) { m.durum[s] = !m.durum[s]; },
                yuzde(m) {
                    const ok = Object.values(m.durum).filter(v => v).length;
                    return Math.round((ok / this.asamalar.length) * 100);
                },
                sil(i) { if(confirm('Silinsin mi?')) this.musteriler.splice(i, 1); },
                verileriSistemeIsle() {
                    const tarih = new Date().toLocaleString('tr-TR');
                    const data = {
                        musteriler: this.musteriler,
                        genelNot: this.genelNot,
                        tarih: tarih
                    };
                    localStorage.setItem('sustainly_storage', JSON.stringify(data));
                    this.sonKayit = tarih;
                    alert("TÃ¼m veriler tarayÄ±cÄ± hafÄ±zasÄ±na gÃ¼venli bir ÅŸekilde iÅŸlendi!");
                }
            }
        }).mount('#app')
    </script>
</body>
</html>

